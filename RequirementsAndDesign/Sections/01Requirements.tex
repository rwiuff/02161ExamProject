% !TeX root = ..\..\rapport_13_1.tex
\section{Kravspecifikation}
\subsection{Indledning}
Denne del af rapporten dokumenterer de usecases og begreber som med udgangspunkt i projektoplægget, danner kravspecifikationerne for projektet. Use cases udvikles til Cucumber scenarier som igennem Behavior- og Test Driven Development bliver til den implementation som findes i anden rapport.
\subsection{Ordliste}
\begin{table}[H]
    \centering
    \setlength{\extrarowheight}{8pt}
    \begin{tabular}{>{\bfseries}l p{0.73\textwidth}}
        Medarbejder             & \textit{[Employee]} En medarbejder er en entitet ansat i Softwarehuset A/S, som har et unikt medarbejder ID (medarbejder initialer). En medarbejder kan påtage sig en projektleder rolle, oprette projekter, faste aktiviteter, projektaktiviteter og registrere arbejdstid på aktiviteter.                                    \\
        Projekt aktivitet       & \textit{[Project activity]} En delopgave af et projekt. Aktiviteter har en start- og slutuge, og kan få fastsat en budgetteret tid. Alle medarbejdere kan udføre arbejde på alle projektaktiviteter.                                                                                                                           \\
        Fast aktivitet          & \textit{[Regular activity]} Aktivitet der ikke kan pålægges et projekt. F.eks. ferie, sygdom, kurser. Disse har en start- og slutuge.                                                                                                                                                                                          \\
        Projekt                 & \textit{[Project]} Udviklingsarbejde udført for en kunde. Et projekt administreres af en projektleder og er inddelt i aktiviteter. Hvert projekt har et projektnummer.                                                                                                                                                         \\
        Kunde                   & \textit{[Customer]} En ekstern entitet som bestiller og er modtager af projekter.                                                                                                                                                                                                                                              \\
        Projektleder            & \textit{[Project leader]} En medarbejder der har ret til at oprette og tildele aktiviteter for et givent projekt samt generere projektrapporter.                                                                                                                                                                               \\
        Medarbejder initialer   & \textit{[Employee initials]} Unik identifikation for hver enkelt medarbejder, bestående af fire bogstaver. To første fra fornavn efterfulgt af to første fra efternavn. F.eks. ``rawi''. Hvis initialer allerede er taget, vælges bogstav et og tre i efternavn, derefter et og fire, osv.                                     \\
        Projektnummer           & \textit{[Project number]} Identifikation for hvert enkelt projekt. Har formen årstal efterfulgt af et trecifret løbenummer. F.eks. ``23001''                                                                                                                                                                                   \\
        Budgetteret tid         & \textit{[Time budget]} En aktivitets estimerede antal hele timer.                                                                                                                                                                                                                                                              \\
        Arbejdstidsregistrering & \textit{[Work time registration]} Mængde tid i inkrementer af halve timer, brugt på en aktivitet. Kan registreres af den medarbejder som har brugt arbejdstid på en given aktivitet.                                                                                                                                           \\
        Start- og sluttid       & \textit{[Start- and end week]} En periode med opløsning på uge-niveau til aktiviteter. Begge tider angives som år og uge, ved formatet ``ÅÅUU''. F.eks. 2304 for uge 4 i 2023. En starttid afgrænser starten af en given uge, en sluttid afgrænser ved slutningen af en given uge. Start- og sluttid kan derfor godt være ens. \\
        Projektrapport          & \textit{[Project report]} Et udskrift der viser info om et projekt, (Leder, kunde, projekt ID), samt aktiviteter, deres arbejdstidsregistreringer og samlede fremgang.
    \end{tabular}
\end{table}\newpage
\subsection{Use case diagrammer}
Dette afsnit starter med \cref{fig:AlleActorsPaaEnGang} som viser hvilke aktører der kan udfører hvilke cases. Herefter kommer en oversigt (\cref{tbl:oversigt}) over de detaljerede use cases med henvisning til Cucumber features (\cpagerefrange{lst:usecaseRegisterEmployee}{lst:usecaseGenerateProjectReport}) og sekvensdiagrammer (\Cpagerefrange{fig:sequenceRegisterEmployee}{fig:sequenceGenerateProjectReport}).
\begin{figure}[H]
    \centering
    \caption{Use case diagram for programmet hvori de tre aktører inkluderet er Gæst, Medarbejder og Projektleder.}\label{fig:AlleActorsPaaEnGang}
    % \includegraphics[width=.85\textwidth]{Diagrams/Timeregistrering og projektstyring.png}
    \includegraphics[width=.85\textwidth]{RequirementsAndDesign/Diagrams/usecases.eps}
\end{figure}
Som beskrevet i \cref{fig:AlleActorsPaaEnGang} har vi tre roller: Guest, medarbejder og projektleder. Gæsten er en indgang til et system uden data og kan kun oprette medarbejdere i systemet. Medarbejdere har rettigheder til stort set alle funktioner i programmet, indtil en projektleder udpeges. Herefter er det kun projektlederen på et projekt, der kan tilføje medarbejdere til projektet, oprette projektaktiviteter, angive tidsbudgetter og generere rapporter.
\begin{table}[H]
    \centering
    \caption{Use cases for programmet}\label{tbl:oversigt}
    \begin{tabular}{lll}
        \toprule
        Detaljeret use case                  & Cucumber feature                                            & Sekvensdiagram                           \\
        \midrule
        Opret medarbejder                    & \cref{lst:usecaseRegisterEmployee}                          & \cref{fig:sequenceRegisterEmployee}      \\
        Login                                & \cref{lst:usecaseLogin}                                     & \cref{fig:sequenceLogin}                 \\
        Logout                               & \cref{lst:usecaseLogout}                                    & \cref{fig:sequenceLogout}                \\
        Opret projekt                        & \cref{lst:usecaseCreateProject1,,lst:usecaseCreateProject2} & \cref{fig:sequenceCreateProject}         \\
        Påtag projektlederrolle              & \cref{lst:usecaseTakePLRole}                                & \cref{fig:sequenceTakePLRole}            \\
        Tildel medarbejder til projekt       & \cref{lst:usecaseAssignEmployee}                            & \cref{fig:sequenceAssignEmployee}        \\
        Opret projektaktivitet               & \cref{lst:usecaseCreateProjectActivity}                     & \cref{fig:sequenceCreateProjectActivity} \\
        Opret fast aktivitet                 & \cref{lst:usecaseCreateRegularActivity}                     & \cref{fig:sequenceCreateRegularActivity} \\
        Registrer arbejdstid                 & \cref{lst:usecaseRegisterWorktime}                          & \cref{fig:sequenceRegisterWorktime}      \\
        Anfør tidsbudget på projektaktivitet & \cref{lst:usecaseSetTimeBudget}                             & \cref{fig:sequenceSetTimeBudget}         \\
        Generér projektrapport               & \cref{lst:usecaseGenerateProjectReport}                     & \cref{fig:sequenceGenerateProjectReport} \\
        \bottomrule
    \end{tabular}
\end{table}\newpage
\subsection{Detaljerede use cases}
\begin{listing}[H]
    \centering
    \caption{Cucumber feature: Opret medarbejder}\label{lst:usecaseRegisterEmployee}
    \inputminted[linenos, breaklines]{cucumber}{TaskFusion/features/employees/register_employee.feature}
\end{listing}
\begin{listing}[H]
    \centering
    \caption{Cucmber feature: Login}\label{lst:usecaseLogin}
    \inputminted[linenos, breaklines]{cucumber}{TaskFusion/features/employees/login.feature}
\end{listing}
\begin{listing}[H]
    \centering
    \caption{Cucmber feature: Logout}\label{lst:usecaseLogout}
    \inputminted[linenos, breaklines]{cucumber}{TaskFusion/features/employees/logout.feature}
\end{listing}
\begin{listing}[H]
    \centering
    \caption{Cucmber feature: Opret projekt (fortsætter på \cref{lst:usecaseCreateProject2})}\label{lst:usecaseCreateProject1}
    \inputminted[linenos, breaklines, lastline=36]{cucumber}{TaskFusion/features/projects/create_project.feature}
\end{listing}
\begin{listing}[H]
    \centering
    \caption{Cucmber feature: Opret projekt (fortsat fra \cref{lst:usecaseCreateProject1})}\label{lst:usecaseCreateProject2}
    \inputminted[linenos, breaklines, firstline=37]{cucumber}{TaskFusion/features/projects/create_project.feature}
\end{listing}
\begin{listing}[H]
    \centering
    \caption{Cucumber feature: Påtag projektlederrolle}\label{lst:usecaseTakePLRole}
    \inputminted[linenos, breaklines]{cucumber}{TaskFusion/features/projects/assign_project_leader_to_project.feature}
\end{listing}
\begin{listing}[H]
    \centering
    \caption{Cucmber feature: Tildel medarbejder til projekt}\label{lst:usecaseAssignEmployee}
    \inputminted[linenos, breaklines]{cucumber}{TaskFusion/features/projects/assign_employee_to_project.feature}
\end{listing}
\begin{listing}[H]
    \centering
    \caption{Cucmber feature: Opret projektaktivitet}\label{lst:usecaseCreateProjectActivity}
\end{listing}
\begin{listing}[H]
    \centering
    \caption{Cucmber feature: Opret fast aktivitet}\label{lst:usecaseCreateRegularActivity}
\end{listing}
\begin{listing}[H]
    \centering
    \caption{Cucmber feature: Registrer arbejdstid}\label{lst:usecaseRegisterWorktime}
\end{listing}
\begin{listing}[H]
    \centering
    \caption{Cucmber feature: Anfør tidsbudget på projektaktivitet}\label{lst:usecaseSetTimeBudget}
\end{listing}
\begin{listing}[H]
    \centering
    \caption{Cucmber feature: Generér projektrapport}\label{lst:usecaseGenerateProjectReport}
\end{listing}
\newpage
\section{Diskussion: Kravspecifikation}
\subsection{Oplægsmæssige overvejelser og afgrænsninger}
\subsubsection{En admin rolle}
Oplægget nævner som udgangspunkt ikke et krav om en administrator rolle, men derimod at det er et internt system og at der ikke er behov for et sikkerhedslag. Ofte er det oplagt at have en admin facilitet, og i dette projekt kunne det som eksempel give mening til oprettelse af medarbejdere. Men i forbindelse med en kortlægning af projektet samt afgrænsning af funktioner, ser vi større værdi for kunden i at fokusere på de ønskede funktioner i stedet for at \textit{gætte} på at de vil have en admin. Desuden kan en sådan rolle laves senere, hvis nødvendigt. At en gæst kan oprette en medarbejder er dermed et eksempel på brugen af K.I.S.S. \textit{(Keep It Simple Stupid)} ved at anskue denne funktionalitet som en mock admin-klasse, der eksisterer udelukkende i forbindelse med udviklingen af arbejdstidsregistrering og projekthåndtering, de centrale ønsker.
\subsubsection{UI og fokus på business logik}
Oplægget har ingen krav til bruger interface, men derimod rigeligt med krav til funktionalitet. Vi ønsker at levere noget brugbart til kunden hurtigt, og have K.I.S.S. i fokus for vores beslutninger og afgrænsning. Fra tidlige leverancer kan vi bruge kundens feedback til at videreudvikle på softwareløsningen iterativt, og bedre kunne prioritere udvikling af funktioner løbende. Derfor har vi i første ikke noget grafisk bruger interface, men derimod et program der køres i et CLI \textit{(Command Line Interface)}.
\subsubsection{Medarbejdere med samme navn}
For at tilgodese at medarbejdere kan hedde det samme vil medarbejder-objekter blive gemt ud fra deres initialer \textbf{som derfor skal være unikke}.
\subsection{Tekniske overvejelser}
\subsubsection{Abstractions og compositions}
Disse to begreber bliver kun brugt i abstrakt forstand, da man i Java ikke har direkte kontrol over objekter. De kan konstrueres, men eksistere selv når objekter der peger på dem slettes. Java har en garbage collector der jævnligt analysere pointers i programmet og fjerner objekter der ikke bliver peget på.
\subsubsection{UI}
UI'en er som nævnt tekstbaseret. Dette betyder at vi til at starte med ikke har en \emph{Viewer}-klasse, da alt printes til konsollen. Bliver UI-delen for kompliceret kan en \emph{Viewer}-klasse let implementeres.
\newpage